<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="description" content="Szczeg√≥≈Çy wydarzenia w Fete Lite">
    <meta name="theme-color" content="#673ab7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    
    <title>Szczeg√≥≈Çy wydarzenia - Fete Lite</title>
    
    <!-- Performance optimizations -->
    <link rel="dns-prefetch" href="https://basemaps.cartocdn.com">
    <link rel="dns-prefetch" href="https://unpkg.com">
    <link rel="preconnect" href="https://basemaps.cartocdn.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    
    <!-- PWA manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Ikony -->
    <link rel="icon" type="image/svg+xml" href="/images/logo.svg">
    <link rel="apple-touch-icon" href="/images/icons/icon-192.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/modern-effects.css">
    <link rel="stylesheet" href="/css/responsive.css">
    
    <!-- Leaflet CSS dla map - preload dla szybszego ≈Çadowania -->
    <link rel="preload" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"></noscript>
    
    <!-- QR Code library - defer dla lepszej wydajno≈õci -->
    <script defer src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <!-- Leaflet JS dla map - defer, ≈Çadowane asynchronicznie -->
    <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
    <!-- Komunikat offline -->
    <div id="offline-banner" class="offline-banner" style="display: none;">
        <span data-i18n="offline.message">üîå Brak po≈ÇƒÖczenia - pracujesz w trybie offline</span>
        <button id="offline-close" aria-label="Zamknij komunikat">&times;</button>
    </div>
    
    <!-- Nag≈Ç√≥wek - zarzƒÖdzany przez header.js -->
    <header></header>
    
    <!-- G≈Ç√≥wna zawarto≈õƒá -->
    <main class="main-content">
        <!-- Loading state -->
        <div id="loading-state" class="loading-state">
            <div class="spinner"></div>
            <p data-i18n="loading.event">≈Åadowanie wydarzenia...</p>
        </div>
        
        <!-- Error state -->
        <div id="error-state" class="error-state" style="display: none;">
            <div class="error-icon">‚ùå</div>
            <h2 data-i18n="error.eventNotFound">Wydarzenie nie znalezione</h2>
            <p data-i18n="error.eventNotFoundDesc">Wydarzenie mog≈Ço zostaƒá usuniƒôte lub nie istnieje.</p>
            <a href="/" class="btn btn-primary" data-i18n="error.backToHome">Wr√≥ƒá do strony g≈Ç√≥wnej</a>
        </div>
        
        <!-- Szczeg√≥≈Çy wydarzenia -->
        <div id="event-details-container" class="event-details-container" style="display: none;">
            <!-- Sekcja g≈Ç√≥wna -->
            <section class="event-hero">
                <div class="event-hero-content">
                    <div class="event-date-badge">
                        <span id="event-day" class="event-day"></span>
                        <span id="event-month" class="event-month"></span>
                    </div>
                    
                    <div class="event-main-info">
                        <h2 id="event-title" class="event-title"></h2>
                        <div class="event-meta">
                            <div class="event-time">
                                <span class="meta-icon">‚è∞</span>
                                <span id="event-time-text"></span>
                            </div>
                            <div class="event-location-info" id="event-location-info" style="display: none;">
                                <span class="meta-icon">üìç</span>
                                <span id="event-location-text"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Opis wydarzenia -->
            <section class="event-description-section" id="event-description-section" style="display: none;">
                <h3 data-i18n="details.description">Opis</h3>
                <p id="event-description" class="event-description"></p>
            </section>
            
            <!-- Opcje dodatkowe -->
            <section class="event-options-section" id="event-options-section" style="display: none;">
                <h3 data-i18n="details.features">Co bƒôdzie na wydarzeniu</h3>
                <div id="event-options" class="event-options-list"></div>
            </section>
            
            <!-- Mapa lokalizacji -->
            <section class="event-map-section" id="event-map-section" style="display: none;">
                <h3 data-i18n="details.location">Lokalizacja</h3>
                <div id="event-map" class="event-map"></div>
                <div class="map-actions">
                    <button id="show-directions-btn" class="btn btn-secondary">
                        <span data-i18n="details.getDirections">Poka≈º dojazd</span>
                    </button>
                </div>
            </section>
            
            <!-- Lista uczestnik√≥w -->
            <section class="event-participants-section" id="event-participants-section" style="display: none;">
                <h3 data-i18n="details.participants">Uczestnicy</h3>
                <div id="participants-list" class="participants-list"></div>
                <p id="no-participants-message" class="no-participants" style="display: none;">
                    <span data-i18n="details.noParticipants">Nikt jeszcze nie do≈ÇƒÖczy≈Ç do wydarzenia</span>
                </p>
            </section>
            
            <!-- Przyciski akcji -->
            <section class="event-actions-section">
                <div class="action-buttons">
                    <!-- Button for participants to join event -->
                    <button id="join-event-btn" class="btn btn-primary btn-action" style="display: none;">
                        <span class="btn-icon">‚úÖ</span>
                        <span data-i18n="details.joinEvent">Do≈ÇƒÖcz do wydarzenia</span>
                    </button>
                    
                    <button id="copy-invite-code-btn" class="btn btn-primary btn-action">
                        <span class="btn-icon">üé´</span>
                        <span data-i18n="details.copyInviteCode">Skopiuj kod zaproszenia</span>
                    </button>
                    
                    <button id="show-qr-btn" class="btn btn-secondary btn-action">
                        <span class="btn-icon">üì±</span>
                        <span data-i18n="details.showQR">Poka≈º kod QR</span>
                    </button>
                    
                    <button id="add-to-calendar-btn" class="btn btn-secondary btn-action">
                        <span class="btn-icon">üìÖ</span>
                        <span data-i18n="details.addToCalendar">Dodaj do kalendarza</span>
                    </button>
                    
                    <button id="edit-event-btn" class="btn btn-secondary btn-action">
                        <span class="btn-icon">‚úèÔ∏è</span>
                        <span data-i18n="details.editEvent">Edytuj wydarzenie</span>
                    </button>
                </div>
                
                <div class="danger-actions">
                    <button id="delete-event-btn" class="btn btn-danger btn-small">
                        <span data-i18n="details.deleteEvent">Usu≈Ñ wydarzenie</span>
                    </button>
                </div>
            </section>
        </div>
    </main>
    
    <!-- Modal QR Code -->
    <div id="qr-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="details.shareTitle">Udostƒôpnij wydarzenie</h3>
                <button class="modal-close" aria-label="Zamknij">&times;</button>
            </div>
            <div class="modal-body">
                <div class="qr-display">
                    <div id="qr-code-container" class="qr-code-container"></div>
                    <p class="qr-description" data-i18n="details.qrDescription">
                        Zeskanuj ten kod QR aby udostƒôpniƒá wydarzenie
                    </p>
                    <div class="share-url">
                        <input type="text" id="share-url-input" class="form-input" readonly>
                        <button id="copy-url-btn" class="btn btn-secondary btn-small">
                            <span data-i18n="details.copyLink">Kopiuj link</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal do≈ÇƒÖczania do wydarzenia -->
    <div id="join-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="details.joinEventTitle">Do≈ÇƒÖcz do wydarzenia</h3>
                <button class="modal-close" aria-label="Zamknij">&times;</button>
            </div>
            <div class="modal-body">
                <p data-i18n="details.joinDescription">Potwierd≈∫, ≈ºe chcesz do≈ÇƒÖczyƒá do tego wydarzenia:</p>
                <div class="join-info">
                    <div class="join-event-name" id="join-event-name"></div>
                    <div class="join-event-date" id="join-event-date"></div>
                </div>
                <div class="form-group">
                    <label for="participant-name" data-i18n="details.yourName">Twoje imiƒô:</label>
                    <input type="text" id="participant-name" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="participant-email" data-i18n="details.yourEmail">Tw√≥j email (opcjonalnie):</label>
                    <input type="email" id="participant-email" class="form-input">
                </div>
            </div>
            <div class="modal-footer">
                <button id="confirm-join-btn" class="btn btn-primary">
                    <span data-i18n="details.confirmJoin">Potwierd≈∫ udzia≈Ç</span>
                </button>
                <button class="btn btn-secondary modal-close">
                    <span data-i18n="common.cancel">Anuluj</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal potwierdzenia usuniƒôcia -->
    <div id="delete-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header danger">
                <div class="warning-icon">‚ö†Ô∏è</div>
                <h3 data-i18n="details.confirmDelete">Potwierd≈∫ usuniƒôcie</h3>
            </div>
            <div class="modal-body">
                <p data-i18n="details.deleteWarning">
                    Czy na pewno chcesz usunƒÖƒá to wydarzenie? Tej operacji nie mo≈ºna cofnƒÖƒá.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-close" data-i18n="details.cancel">
                    Anuluj
                </button>
                <button id="confirm-delete-btn" class="btn btn-danger">
                    <span data-i18n="details.confirmDeleteBtn">Tak, usu≈Ñ wydarzenie</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Modal edycji (placeholder) -->
    <div id="edit-modal" class="modal modal-large" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="details.editTitle">Edytuj wydarzenie</h3>
                <button class="modal-close" aria-label="Zamknij">&times;</button>
            </div>
            <div class="modal-body">
                <p data-i18n="details.editComingSoon">
                    Funkcja edycji wydarze≈Ñ bƒôdzie dostƒôpna wkr√≥tce.
                </p>
                <p data-i18n="details.editWorkaround">
                    Na razie mo≈ºesz utworzyƒá nowe wydarzenie z podobnymi danymi.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary modal-close" data-i18n="details.close">
                    Zamknij
                </button>
                <a href="/create-event.html" class="btn btn-primary">
                    <span data-i18n="details.createNew">Utw√≥rz nowe</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Template dla opcji wydarzenia -->
    <template id="event-option-template">
        <div class="event-option">
            <span class="option-icon"></span>
            <span class="option-label"></span>
        </div>
    </template>
    
    <!-- Nawigacja - zarzƒÖdzana przez navigation.js -->
    <div id="navigation-container"></div>
    
    <!-- Skrypty -->
    <script src="/js/qrcode.min.js"></script>
    <script src="/js/i18n.js"></script>
    <!-- Configuration -->
    <script src="/js/config.js"></script>
    <!-- API Integration -->
    <script src="/js/api-client.js"></script>
    <script src="/js/data-adapter.js"></script>
    <!-- Storage & Core -->
    <script src="/js/storage.js"></script>
    <script src="/js/geolocation.js"></script>
    <script src="/js/events.js"></script>
    <script src="/js/qr.js"></script>
    <script src="/js/ics-export.js"></script>
    <script src="/js/darkmode.js"></script>
    <script src="/js/network.js"></script>
    <script src="/js/notifications.js"></script>
    <script src="/js/sample-data.js"></script>
    <script src="/js/settings.js"></script>
    <script src="/js/modern-effects.js"></script>
    <script src="/js/navigation.js"></script>
    <script src="/js/header.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/event-details.js"></script>
</body>
</html>