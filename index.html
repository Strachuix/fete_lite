<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no"
    />
    <meta
      name="description"
      content="Fete Lite - Lekka aplikacja PWA do organizowania wydarze≈Ñ towarzyskich"
    />
    <meta name="theme-color" content="#673ab7" />

    <!-- PWA Meta Tags dla natywnego wyglƒÖdu -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Fete Lite" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Fete Lite" />
    <meta name="msapplication-TileColor" content="#673ab7" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="color-scheme" content="light dark" />

    <!-- Dodatkowe meta tagi dla ukrycia paska adresu -->
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="HandheldFriendly" content="true" />
    <meta name="MobileOptimized" content="width" />
    <meta name="apple-mobile-web-app-oriented" content="portrait" />

    <title>Fete Lite - Organizuj Wydarzenia</title>

    <!-- PWA manifest -->
  <link rel="manifest" href="./manifest.json" crossorigin="use-credentials" />

    <!-- Ikony -->
    <link rel="icon" type="image/svg+xml" href="./images/logo.svg" />
    <link rel="apple-touch-icon" href="./images/icons/icon-192.png" />

    <!-- Critical CSS inline for faster FCP -->
    <style>
    /* Fete Lite - Critical CSS Above the Fold */
    *{box-sizing:border-box;margin:0;padding:0}html{font-size:16px;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#1e293b;background:#f8fafc;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow-x:hidden;position:relative;min-height:100vh}.main-content{min-height:calc(100vh - 140px);padding:1.5rem 1rem;padding-bottom:calc(2rem + 100px);position:relative;max-width:1200px;margin:0 auto}.container{max-width:1200px;margin:0 auto;padding:0 1rem}.main-header{background:#fff;border-bottom:1px solid #ffffff1a;box-shadow:0 10px 15px -3px #0000001a 0 4px 6px -2px #0000000d;position:sticky;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);top:0;z-index:1020}.uniform-header{background:#fff;border-bottom:1px solid #ffffff1a;box-shadow:0 10px 15px -3px #0000001a 0 4px 6px -2px #0000000d;position:sticky;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);top:0;z-index:1020}.uniform-header .header-content{display:flex;align-items:center;justify-content:center;padding:1rem;max-width:1200px;margin:0 auto}.uniform-header .app-title{font-size:1.25rem;font-weight:700;color:#1e293b!important;margin:0;text-align:center}.bottom-nav{position:fixed;bottom:1.5rem;left:50%;transform:translateX(-50%);width:calc(100% - 2rem);max-width:400px;background:#fff;border:1px solid #fff3;border-radius:1.5rem;display:flex;justify-content:space-around;padding:1rem 1.5rem;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);box-shadow:0 25px 50px -12px #00000040;z-index:1030}.nav-item,.nav-button{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.25rem;padding:.5rem;text-decoration:none;color:#64748b;font-size:.75rem;font-weight:500;border-radius:.75rem;transition:color .15s ease-in-out,background-color .15s ease-in-out;width:64px;height:56px;background:none;border:none;cursor:pointer;position:relative;flex-shrink:0}.nav-icon{font-size:20px;line-height:1;display:flex;align-items:center;justify-content:center;width:24px;height:24px}.nav-label{font-size:.75rem;font-weight:inherit;text-align:center;line-height:1.2;min-height:14px;display:none}.nav-item.active{color:#667eea;background:#667eea26;font-weight:600}.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1.5rem;font-family:inherit;font-size:1rem;font-weight:600;line-height:1;text-decoration:none;text-align:center;white-space:nowrap;border:none;border-radius:.75rem;cursor:pointer;transition:all .15s ease-in-out;user-select:none;-webkit-user-select:none;min-height:48px;position:relative;overflow:hidden;backdrop-filter:blur(10px);transform:translateY(0)}.btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;box-shadow:0 8px 32px #667eea26;border:1px solid #ffffff1a}.loading-spinner{width:40px;height:40px;border:3px solid #e2e8f0;border-top:3px solid #667eea;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 1rem}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}h1,h2,h3{font-weight:600;line-height:1.25;margin-bottom:1rem;color:#1e293b}h1{font-size:1.875rem}h2{font-size:1.5rem}h3{font-size:1.25rem}@media (max-width: 767px){.main-content{padding:1rem .75rem;padding-bottom:calc(1.5rem + 100px)}.nav-label{display:none!important}}
    </style>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="./js/main.js" as="script">
    <link rel="preload" href="./js/config.js" as="script">
    <link rel="preload" href="./js/storage.js" as="script">
    <link rel="preload" href="./js/events.js" as="script">
    
    <!-- Non-critical CSS loaded asynchronously -->
    <link rel="preload" href="./css/style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="./css/style.css"></noscript>
    
    <link rel="preload" href="./css/modern-effects.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="./css/modern-effects.css"></noscript>
    
    <link rel="preload" href="./css/responsive.css" as="style" onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="./css/responsive.css"></noscript>
    
    <link rel="preload" href="./css/standalone.css" as="style" onload="this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="./css/standalone.css"></noscript>
    <link rel="stylesheet" href="./css/overrides.css">
  </head>
  <body>
    <!-- Komunikat offline -->
    <div id="offline-banner" class="offline-banner" style="display: none">
      <span data-i18n="offline.message"
        >üîå Brak po≈ÇƒÖczenia - pracujesz w trybie offline</span
      >
      <button id="offline-close" aria-label="Zamknij komunikat">&times;</button>
    </div>

    <!-- G≈Ç√≥wny nag≈Ç√≥wek - zarzƒÖdzany przez header.js -->
    <header></header>

    <!-- G≈Ç√≥wna zawarto≈õƒá -->
    <main class="main-content">

      <!-- Lista wydarze≈Ñ -->
      <section class="events-section">
        <div class="section-header">
          <h3 data-i18n="home.myEvents">Moje wydarzenia</h3>

          <!-- Wyszukiwanie i przycisk filtr√≥w -->
          <div class="search-and-filters-bar">
            <div class="search-container">
              <input
                type="search"
                id="event-search"
                class="search-input"
                placeholder="Szukaj wydarze≈Ñ..."
                data-i18n-placeholder="search.placeholder"
                aria-label="Szukaj wydarze≈Ñ"
              />
              <span class="search-icon">üîç</span>
            </div>

            <button
              id="toggle-filters-btn"
              class="btn btn-secondary btn-filters"
              aria-label="Poka≈º filtry"
            >
              <span data-i18n="filter.showFilters">Dodaj filtry</span>
            </button>
          </div>

          <!-- Filtry przeniesione do modala (otwierane przyciskiem 'Dodaj filtry') -->
          <!-- The filters themselves live in #filters-modal (see bottom of page) -->
        </div>

        <!-- Kontener na wydarzenia -->
        <div id="events-container" class="events-container stagger-container">
          <!-- Wydarzenia bƒôdƒÖ ≈Çadowane dynamicznie przez JavaScript -->
          <div class="loading-placeholder glass">
            <div class="loading-spinner"></div>
            <p data-i18n="loading.events">≈Åadowanie wydarze≈Ñ...</p>
          </div>
        </div>

        <!-- Komunikat o braku wydarze≈Ñ -->
        <div
          id="no-events"
          class="no-events glass slide-in-up"
          style="display: none"
        >
          <div class="no-events-illustration float-animation">üìÖ</div>
          <h4 data-i18n="home.noEvents">Brak wydarze≈Ñ</h4>
          <p data-i18n="home.noEventsDesc">
            Utw√≥rz swoje pierwsze wydarzenie i zacznij organizowaƒá spotkania!
          </p>
          <a href="./create-event.html" class="btn btn-secondary hover-lift">
            <span data-i18n="home.createFirst">Utw√≥rz pierwsze wydarzenie</span>
          </a>
        </div>
      </section>
    </main>

    <!-- Filters modal: contains the same filter controls previously inline -->
    <div id="filters-modal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="filters-modal-title">
      <div class="modal-content" style="max-width:520px;padding:1.25rem;">
        <div class="modal-header">
          <h3 id="filters-modal-title" data-i18n="filter.title">Filtry wydarze≈Ñ</h3>
          <button id="filters-modal-close" class="modal-close" aria-label="Zamknij filtry">&times;</button>
        </div>
        <div class="modal-body" style="padding:1rem 0;">
          <div class="events-filter">
            <div class="filter-group">
              <label for="events-filter" data-i18n="filter.timeLabel">Czas</label>
              <select id="events-filter" aria-label="Filtruj wydarzenia">
                <option value="all" data-i18n="filter.all">Wszystkie</option>
                <option value="upcoming" data-i18n="filter.upcoming">NadchodzƒÖce</option>
                <option value="past" data-i18n="filter.past">Przesz≈Çe</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="theme-filter" data-i18n="filter.themeLabel">Tematyka</label>
              <select id="theme-filter" aria-label="Filtruj po temacie">
                <option value="all" data-i18n="filter.allThemes">Wszystkie tematy</option>
                <!-- Opcje temat√≥w bƒôdƒÖ dodane dynamicznie przez JavaScript -->
              </select>
            </div>
            <div class="filter-group">
              <label for="sort-events" data-i18n="filter.sortLabel">Sortowanie</label>
              <select id="sort-events" aria-label="Sortuj wydarzenia">
                <option value="date-asc" data-i18n="sort.dateAsc">Data: od najstarszych</option>
                <option value="date-desc" data-i18n="sort.dateDesc">Data: od najnowszych</option>
                <option value="title-asc" data-i18n="sort.titleAsc">Nazwa: A-Z</option>
                <option value="title-desc" data-i18n="sort.titleDesc">Nazwa: Z-A</option>
                <option value="created-desc" data-i18n="sort.createdDesc">Ostatnio utworzone</option>
              </select>
            </div>
          </div>
        </div>
        <div class="modal-footer" style="display:flex;gap:.5rem;justify-content:flex-end;">
          <button id="filters-modal-apply" class="btn btn-primary">Zastosuj</button>
          <button id="filters-modal-cancel" class="btn">Anuluj</button>
        </div>
      </div>
    </div>

    <!-- Nawigacja - zarzƒÖdzana przez navigation.js -->
    <div id="navigation-container"></div>

    <!-- Modal powiadomie≈Ñ -->
    <div id="notifications-modal" class="modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="notifications.title">Powiadomienia</h3>
          <button class="modal-close" aria-label="Zamknij">&times;</button>
        </div>
        <div class="modal-body">
          <div id="notifications-list" class="notifications-list">
            <p data-i18n="notifications.empty">Brak nowych powiadomie≈Ñ</p>
          </div>
          <div class="notifications-settings">
            <label class="checkbox-label">
              <input type="checkbox" id="notifications-enabled" />
              <span data-i18n="notifications.enable"
                >W≈ÇƒÖcz powiadomienia o wydarzeniach</span
              >
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Template dla karty wydarzenia -->
    <template id="event-card-template">
      <article
        class="event-card stagger-item hover-lift interactive-card glass"
        data-event-id=""
      >
        <div class="event-card-header gradient-primary">
          <div class="event-date">
            <span class="event-day"></span>
            <span class="event-month"></span>
            <span class="event-countdown"></span>
          </div>
          <div class="event-actions">
            <button
              class="event-action-btn share-btn hover-glow"
              aria-label="Udostƒôpnij wydarzenie"
            >
              <span>üîó</span>
            </button>
          </div>
        </div>

        <div class="event-card-content">
          <h4 class="event-title"></h4>
          <div class="event-details">
            <div class="event-time">
              <span class="event-icon">‚è∞</span>
              <span class="event-time-text"></span>
            </div>
            <div class="event-location">
              <span class="event-icon">üìç</span>
              <span class="event-location-text"></span>
            </div>
          </div>
          <p class="event-description"></p>

          <div class="event-tags"></div>
        </div>

        <div class="event-card-footer">
          <button class="btn btn-secondary btn-small event-details-btn">
            <span data-i18n="home.viewDetails">Zobacz szczeg√≥≈Çy</span>
          </button>
        </div>
      </article>
    </template>

    <!-- Critical Scripts - Load immediately -->
    <script src="./js/config.js"></script>
    <script src="./js/i18n.js"></script>
    <script src="./js/storage.js"></script>
    <script src="./js/events.js"></script>
    <script src="./js/sample-data-api.js"></script>
    <script src="./js/main.js"></script>
    
    <!-- Non-critical Scripts - Load asynchronously -->
    <script>
    // Performance-optimized lazy loading for non-critical features
    window.loadNonCriticalScripts = function() {
      const scripts = [
        './js/lazy-loading.js', 
        './js/mobile-fullscreen.js',
        './js/api-client.js',
        './js/data-adapter.js',
        './js/darkmode.js',
        './js/network.js',
        './js/notifications.js',
        './js/modern-effects.js',
        './js/navigation.js',
        './js/header.js',
        './js/update-checker.js'
      ];
      
      scripts.forEach((src, index) => {
        setTimeout(() => {
          const script = document.createElement('script');
          script.src = src;
          script.async = true;
          document.head.appendChild(script);
        }, index * 100); // Staggered loading for better performance
      });
    };
    
    // Load non-critical scripts after initial render
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        setTimeout(loadNonCriticalScripts, 500);
      });
    } else {
      setTimeout(loadNonCriticalScripts, 500);
    }
    </script>
  </body>
</html>
